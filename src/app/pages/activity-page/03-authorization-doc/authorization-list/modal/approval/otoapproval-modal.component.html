<div class="modal-header">
  <h5 class="modal-title">Approval Details</h5>
  <button type="button" class="btn-close" aria-label="Close" (click)="activeModal.dismiss('Cross click')"></button>
</div>

<div class="modal-body">
  <div *ngIf="loading" class="text-center my-4">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <div *ngIf="!loading">
    <div *ngIf="approvalData && approvalData.length > 0; else noApprovalData">
      <div class="table-responsive">
        <table class="table table-bordered align-middle">
          <thead class="table-light text-center fs-6">
            <tr>
              <th><i class="ri-bar-chart-horizontal-line me-1"></i>Level</th>
              <th><i class="ri-user-line me-1"></i>Approver</th>
              <th><i class="ri-id-card-line me-1"></i>Employee Code</th>
              <th><i class="ri-flag-line me-1"></i>Status</th>
              <th><i class="ri-time-line me-1"></i>Date</th>
            </tr>
          </thead>
          <tbody class="text-start fs-6">
            <tr *ngFor="let item of approvalData; let i = index">
              <td>{{ item.actor || '-' }}</td>
              <td>{{ item.authorization?.employee_name || '-' }}</td>
              <td>{{ item.authorization?.employee_code || '-' }}</td>
              <td>
                <ng-container [ngSwitch]="item.status">
                  <span *ngSwitchCase="'approved'" class="badge bg-success text-white px-3 py-2 fs-6">
                    <i class="ri-check-line me-1"></i> Approved
                  </span>
                  <span *ngSwitchCase="'not_approved'" class="badge bg-danger text-white px-3 py-2 fs-6">
                    <i class="ri-close-line me-1"></i> Not Approved
                  </span>
                  <span *ngSwitchCase="'rejected'" class="badge bg-danger text-white px-3 py-2 fs-6">
                    <i class="ri-close-line me-1"></i> Rejected
                  </span>
                  <span *ngSwitchCase="'pending'" class="badge bg-warning text-dark px-3 py-2 fs-6">
                    <i class="ri-time-line me-1"></i> Pending
                  </span>
                  <span *ngSwitchDefault class="badge bg-info text-white px-3 py-2 fs-6">
                    <i class="ri-information-line me-1"></i> {{ item.status | titlecase }}
                  </span>
                </ng-container>
              </td>
              <td>{{ item.updated_date ? (item.updated_date | date:'medium') : '-' }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <ng-template #noApprovalData>
      <div class="text-center py-4 text-muted">
        <i class="ri-user-follow-line fs-3 mb-2"></i>
        <p>No approval data available.</p>
      </div>
    </ng-template>
  </div>
</div>

<div class="modal-footer">
  <button type="button" class="btn btn-secondary" (click)="activeModal.close('Close click')">Close</button>
</div>
